<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.gmcc.aliface.mapper.AliUserMapper">
    <insert id="insertUser">
        insert into alipay_face_user(UNIQUE_ID, CERT_NO, CERT_TYPE, USER_NAME, USER_TYPE)
        values (#{uniqueId}, #{certNo}, #{certType}, #{userName}, #{userType})
    </insert>

    <insert id="insertQueryMsg">
        insert into alipay_query_msg(BIZ_ID, QUERY_MSG)
        values (#{bizId}, #{queryMsg})
    </insert>

    <select id="getUniqueId" resultType="java.lang.String">
        select UNIQUE_ID
        from alipay_face_user
        where CERT_NO = #{certNo}
    </select>

    <select id="getUserInfo" resultType="com.gmcc.aliface.entity.AliRegistor" resultMap="alipayUser">
        select UNIQUE_ID, CERT_NO, CERT_TYPE, USER_NAME, USER_TYPE
        from alipay_face_user
        where UNIQUE_ID = #{uniqueId}
    </select>

    <resultMap id="alipayUser" type="com.gmcc.aliface.entity.AliRegistor">
        <result property="uniqueId" column="UNIQUE_ID"/>
        <result property="certNo" column="CERT_NO"/>
        <result property="certType" column="CERT_TYPE"/>
        <result property="userName" column="USER_NAME"/>
        <result property="userType" column="USER_TYPE"/>
    </resultMap>
</mapper>